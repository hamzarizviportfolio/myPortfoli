(function(g){g.fn.textition=function(t){var r=g.extend({map:{x:100,y:50,z:1e3},speed:1,animation:"ease",handler:"click",perspective:300,autoplay:false,interval:3,element:this},t);var e=this,a=this.children(),n,s=0,i={},o;var p=function(t){switch(t){case" ":return"&nbsp;";default:return t}};var c=function(){var t=a.first();i.top=0;i.left=t.offset().left-e.offset().left;i.width=t.width()+1};var f=function(t){return Math.round(Math.random()*t)-t/2};var l=function(){var t=0,e=0,a=0;for(var n in r.map){switch(n){case"x":t=f(r.map.x);break;case"y":e=f(r.map.y);break;case"z":a=f(r.map.z);break}}g(this).css({"-webkit-transform":"translate3d("+t+"px, "+e+"px, "+a+"px)","-moz-transform":"translate3d("+t+"px, "+e+"px, "+a+"px)","-ms-transform":"translate3d("+t+"px, "+e+"px, "+a+"px)","-o-transform":"translate3d("+t+"px, "+e+"px, "+a+"px)",transform:"translate3d("+t+"px, "+e+"px, "+a+"px)"})};var m=function(t){g(t).css("opacity",0).children().each(l);s++;if(s>a.length-1){s=0}};var v=function(){g(this).css({"-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transform":"translate3d(0px, 0px, 0px)","-ms-transform":"translate3d(0px, 0px, 0px)","-o-transform":"translate3d(0px, 0px, 0px)",transform:"translate3d(0px, 0px, 0px)"})};var d=function(t){g(t).css("opacity",1).children().each(v)};var x=function(t){if(r.autoplay&&t&&!t.isTrigger){clearInterval(o);o=setInterval(k,r.interval*1e3)}m(a[s]);d(a[s])};var h=function(){g(this).css({"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","-webkit-transition":"opacity "+r.speed+"s "+r.animation,"-moz-transition":"opacity "+r.speed+"s "+r.animation,"-ms-transition":"opacity "+r.speed+"s "+r.animation,"-o-transition":"opacity "+r.speed+"s "+r.animation,transition:"opacity "+r.speed+"s "+r.animation,position:"absolute",display:"block",width:i.width,left:i.left,top:i.top})};var u=function(){var t=e.css("position");e.css({"-webkit-perspective":r.perspective+"px","-moz-perspective":r.perspective+"px","-ms-perspective":r.perspective+"px","-o-perspective":r.perspective+"px",perspective:r.perspective+"px",position:t==="static"?"relative":t,height:a.first().height(),width:e.width()})};var y=function(){g(this).css({"-webkit-transition":"-webkit-transform "+r.speed+"s "+r.animation,"-moz-transition":"-moz-transform "+r.speed+"s "+r.animation,"-ms-transition":"-ms-transform "+r.speed+"s "+r.animation,"-o-transition":"-o-transform "+r.speed+"s "+r.animation,transition:"transform "+r.speed+"s "+r.animation,display:"inline-block"})};var w=function(){var t=g(this);var e=t.text();var a="";for(var n=0;n<e.length;n++){a+="<l>"+p(e[n])+"</l>"}t.html(a)};var b=function(){var t=a.not(":first");t.hide().css("opacity",0);u();a.each(w);a.each(h);n=e.find("l");n.each(y);t.show().children().each(l)};var k=function(){x()};var z=function(){var t=new Date;c();b();if(r.handler){r.element.bind(r.handler,x)}if(r.autoplay){o=setInterval(k,r.interval*1e3)}};z()}})(jQuery);